---
layout: post
title: "Being a Programming Language Hipster with Céu"
date: 2017-06-21
---

I did a little game project recently in a new language. You've probably never heard of it.

![Hipster doggo](http://s2.quickmeme.com/img/82/82af2fda9892b0029e8585a058272dc7451e25fedff6425e4da30695a52554de.jpg)

It's called [Céu](http://ceu-lang.org/)! The SDL bindings I used were added to the language super-recently. I wanted to try working in Céu as I've been learning (somewhat passively) about concurrency in Python, and making something in a language that is all about synchronous design and concurrency appealed to me. So it was an interesting and challenging experience to make a game in a couple days with these very young tools:

Céu is a young language, and there is sparse to **no documentation**. There is a nice manual available online, and some academic papers. But both of those have to do with the Céu language more generally. At least when I made this project, there was no helpful documentation about the SDL environment for Céu.

Error messages in Céu are **not Googleable**. You are not going to be able to find many helpful answers for issues that come up in Céu development on StackOverflow. There is a Google Group where Céu is discussed, the documentation mentioned above, and a Gitter chat group, but getting an immediate solution to a specific problem is tough using the usual tried and true method of a quick search.

Another error-related feature I take for granted is that the console error message will help me locate and track down bugs as I develop. But Céu's has **unhelpful console error messages**. Console error messages provide a line number in Céu, but it is a wild goose chase. I am speculating, but I think the line number refers to compiled code. So it's not much help in tracking down bugs, especially small syntactic errors like missing semicolons and ```end```s. It's not entirely pointless, as errors do at least tell you *what* issue you are looking for, if not *where* to find it.

![unhelpful error messages]()

On the plus side, there were twelve example programs that shipped with the SDL library. Those were what I referenced whenever I wanted to get something accomplished. Still, there were some really hard problems - getting a string variable that would be updated with the score turned out to be a huge problem. After trying to get it working for a few hours (!), I worked around the issue of having a text variable rendered to screen with a graphical score display.

Another plus was having someone to work with. [@Johnicholas](https://github.com/johnicholas) has used Céu before, and he was helpful when it came to language features that were new to me. Such as:

This is what **a helper function** looks like in Céu:
{% highlight c %}
{% end highlight %}

And here's what **a class** looks like:

And the main feature of Céu is trails of execution, which are marked by blocks starting with ```par```, ```par/and```, ```par/or```, and connected blocks starting with ```with```. These trails execute in parallel, and allow the program to model simultaneous threads of logic waiting for multiple events. The [three different parallel block keywords](http://fsantanna.github.io/ceu/out/manual/v0.20/#parallel-compositions-and-abortion) indicate different behavior when one of the blocks terminates.

Céu provides parallel compositions to allow multiple lines of execution, aka trails, to coexist and wait for multiple events:

a par/and stands for parallel and and rejoins after all trails in parallel terminate
a par/or stands for parallel or and rejoins after any of the trails in parallel terminates, aborting all others
a par stands for parallel and never rejoins

-error messages
Céu ensures at compile time that a trail never runs forever, and hence, that reaction chains always run to completion in bounded time.
The compiler detects and warns when trails can run in unbounded time: loops that do not await, the so called tight loops.
In the following examples, which all issue warnings at compile time, the loop bodies have at least one path that does not await:

One way to rewrite tight loops would be Ceu's ```await async (variable) do```

Overall, I really enjoyed working with Céu, and was proud of the end result in proportion to how difficult it was to develop without some of my usual toolkit. I could easily see becoming a Céu evangelist; it is an amazing project, and the more I learn the more impressed I am. It was also nice having someone to bumble through the project with. I'm looking forward to doing some more with Céu soon!
